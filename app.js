const Minesweeper = require("./minesweeper");

// 00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19
const bombs = [
  [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
  [0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0],
  [0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  [0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1],
  [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1],
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
  [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0],
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
  [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
];

const game = new Minesweeper(bombs);

function log(state) {
  console.clear();
  console.log(
    this.board
      .render(true)
      .map(line => line.join(" "))
      .join("\n")
  );
  console.log(
    `Score: ${this.score}/${this.score.total}, ${this.score.win && "Win!"}`
  );
}

[
  [0, 3],
  [3, 0],
  [3, 5],
  [0, 0],
  [5, 5],
  [2, 0],
  [2, 2],
  [2, 3],
  [2, 4],
  [2, 6],
  [0, 4],
  [0, 6],
  [0, 1],
  [1, 2],
  [0, 17],
  [6, 15],
  [7, 15],
  [4, 12],
  [4, 13],
  [4, 14]
].forEach(([r, c]) => game.move(r, c).then(log));

[
  [0, 2],
  [3, 3],
  [3, 4],
  [1, 3],
  [1, 4],
  [2, 1],
  [2, 5],
  [7, 3],
  [7, 7],
  [8, 15],
  [9, 14],
  [9, 15],
  [9, 16],
  [9, 17]
].forEach(([r, c]) => game.flag(r, c).then(log));
